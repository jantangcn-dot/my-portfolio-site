<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>orekh坚果 | 官方网站</title>
    <meta name="description" content="orekh坚果的官方作品集，一位在数字画布上，寻找东方意境与赛博朋克交汇点的二次元插画师。">
    <meta name="keywords" content="orekh, 坚果, 二次元, 插画, 艺术家, 原创角色, 游戏原画">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Poppins:wght@700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f9fafb; color: #1f2937; }
        .title-font { font-family: 'Poppins', sans-serif; }
        .hero-bg {
            background-image: url('https://i.imgur.com/VSuwE9g.jpeg');
            background-size: cover;
            background-position: center 30%;
        }
        .restricted-item .overlay { opacity: 0; transition: opacity 0.5s ease; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); }
        .restricted-item:hover .overlay { opacity: 1; }
        .restricted-item img { filter: blur(12px) saturate(0); transition: filter 0.5s ease; }
        .restricted-item:hover img { filter: blur(0px) saturate(1); }
        #age-gate, #artwork-modal { transition: opacity 0.3s ease; }
        .card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card-hover:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1); }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #8b5cf6; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #artwork-modal-content { transition: transform 0.3s ease; }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 border-b border-gray-200">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-3xl font-bold text-gray-800 title-font">orekh坚果</a>
            <nav class="hidden md:flex items-center space-x-6 text-lg">
                <a href="#portfolio" class="text-gray-600 hover:text-purple-600 transition-colors" data-lang="nav_portfolio">作品集</a>
                <a href="【这里粘贴您儿子在爱发电的主页链接】" target="_blank" class="text-gray-600 hover:text-purple-600 transition-colors" data-lang="nav_shop">商店</a>
                <a href="#about" class="text-gray-600 hover:text-purple-600 transition-colors" data-lang="nav_about">关于</a>
                <a href="#commission" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 px-5 rounded-full transition-colors" data-lang="nav_commission">约稿</a>
                <button id="lang-switcher" class="ml-4 text-gray-600 hover:text-purple-600 font-bold text-lg">EN</button>
            </nav>
            <button id="mobile-menu-button" class="md:hidden text-gray-800">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
            </button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 border-t border-gray-200">
            <a href="#portfolio" class="block py-2 text-lg hover:text-purple-600" data-lang="nav_portfolio_mobile">作品集</a>
            <a href="【这里粘贴您儿子在爱发电的主页链接】" target="_blank" class="block py-2 text-lg hover:text-purple-600" data-lang="nav_shop_mobile">商店</a>
            <a href="#about" class="block py-2 text-lg hover:text-purple-600" data-lang="nav_about_mobile">关于</a>
            <a href="#commission" class="block mt-2 bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 px-4 rounded-full text-center" data-lang="nav_commission_mobile">约稿</a>
            <button id="lang-switcher-mobile" class="mt-4 w-full text-gray-600 hover:text-purple-600 font-bold text-lg py-2 rounded-lg bg-gray-100">切换语言 (EN)</button>
        </div>
    </header>

    <section class="relative h-[60vh] md:h-[90vh] flex items-end justify-center text-center overflow-hidden pb-16 md:pb-24">
        <div class="absolute inset-0 hero-bg z-0"></div>
        <div class="absolute inset-0 bg-gradient-to-t from-gray-900/50 to-transparent z-10"></div>
        <div class="relative z-20 px-4">
             <h2 class="text-6xl md:text-8xl font-bold text-white title-font tracking-wider" style="text-shadow: 2px 2px 10px rgba(0,0,0,0.5);" data-lang="hero_title">orekh坚果</h2>
            <p class="text-xl md:text-2xl text-white mt-4 max-w-2xl mx-auto" style="text-shadow: 1px 1px 5px rgba(0,0,0,0.5);" data-lang="hero_subtitle">在光影与色彩中，编织幻想与现实的交界。</p>
        </div>
    </section>

    <main class="container mx-auto px-6">

        <section id="portfolio" class="py-20">
            <h2 class="text-5xl font-bold text-center mb-16 title-font" data-lang="portfolio_title">作品集</h2>
            
            <h3 class="text-3xl font-semibold mb-8 border-l-4 border-purple-500 pl-4" data-lang="portfolio_sfw">公开作品</h3>
            <div id="gallery-sfw" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-8">
                <div class="loader-container col-span-full flex justify-center py-10"><div class="loader"></div></div>
            </div>
            <div id="load-more-sfw-container" class="text-center"></div>

            <h3 class="text-3xl font-semibold mt-20 mb-8 border-l-4 border-red-500 pl-4" data-lang="portfolio_r18">私人作品 (R-18)</h3>
            <div id="gallery-r18" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-8">
                 <div class="loader-container col-span-full flex justify-center py-10"><div class="loader"></div></div>
            </div>
            <div id="load-more-r18-container" class="text-center"></div>
        </section>
        
        <section id="shop" class="py-20 bg-gray-100 rounded-lg">
            <h2 class="text-5xl font-bold text-center mb-16 title-font" data-lang="shop_title">商店</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-5xl mx-auto">
                <div class="bg-white p-8 rounded-lg text-center shadow-md card-hover">
                    <h4 class="text-2xl font-bold mb-2" data-lang="shop_digital_title">数字资产</h4>
                    <p class="mb-4 text-gray-600" data-lang="shop_digital_desc">获取我的独家笔刷、高清壁纸包和PSD源文件，深入了解创作的每一个细节。</p>
                    <a href="【这里粘贴您儿子在爱发电的主页链接】" target="_blank" class="inline-block bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 px-6 rounded-full transition-colors" data-lang="shop_button">前往支持</a>
                </div>
                <div class="bg-white p-8 rounded-lg text-center shadow-md card-hover">
                    <h4 class="text-2xl font-bold mb-2" data-lang="shop_merch_title">实体周边</h4>
                    <p class="mb-4 text-gray-600" data-lang="shop_merch_desc">限量版签名画集、艺术微喷复制画和IP衍生品，将这份热爱带入你的现实世界。</p>
                    <a href="【这里粘贴您儿子在爱发电的主页链接】" target="_blank" class="inline-block bg-gray-400 text-white font-bold py-2 px-6 rounded-full cursor-not-allowed" data-lang="shop_button_soon">敬请期待</a>
                </div>
                <div class="bg-white p-8 rounded-lg text-center shadow-md card-hover">
                    <h4 class="text-2xl font-bold mb-2" data-lang="shop_community_title">知识社群</h4>
                    <p class="mb-4 text-gray-600" data-lang="shop_community_desc">加入我的核心粉丝圈，参与直播改画，获取专属教程，与我一起共同成长。</p>
                    <a href="【这里粘贴您儿子在爱发电的主页链接】" target="_blank" class="inline-block bg-gray-400 text-white font-bold py-2 px-6 rounded-full cursor-not-allowed" data-lang="shop_button_soon">敬请期待</a>
                </div>
            </div>
        </section>

        <section id="about" class="py-20">
            <div class="flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/3">
                    <img src="https://placehold.co/500x500/f9fafb/1f2937?text=orekh" alt="orekh坚果 头像" class="rounded-full shadow-2xl mx-auto">
                </div>
                <div class="md:w-2/3">
                    <h2 class="text-4xl font-bold mb-4 title-font" data-lang="about_title">关于我</h2>
                    <p class="text-lg mb-4" data-lang="about_p1">你好，朋友。我是orekh坚果。</p>
                    <p class="text-lg mb-4" data-lang="about_p2">一位在数字画布上，寻找东方意境与赛博朋克交汇点的画师。这里是我的私人美术馆，也是我与世界对话的窗口。</p>
                    <p class="text-lg" data-lang="about_p3">我相信，每一笔色彩，都应承载情感；每一个角色，都该拥有灵魂。感谢你来到我的世界。</p>
                </div>
            </div>
        </section>
        
        <section id="commission" class="py-20 text-center bg-gray-100 rounded-lg">
            <h2 class="text-5xl font-bold mb-6 title-font" data-lang="commission_title">约稿</h2>
            <p id="commission-status" class="text-xl text-red-500 font-bold mb-8" data-lang="commission_status">【状态：约稿通道当前已关闭，感谢关注】</p>
            <p class="text-lg max-w-3xl mx-auto text-gray-600" data-lang="commission_desc">感谢您对我的作品的喜爱。由于近期个人项目繁忙，为保证每一幅作品的质量，我暂时关闭了新的商业约稿通道。开放时间将在B站及本站同步更新，敬请期待。</p>
        </section>

    </main>

    <footer class="border-t border-gray-200 mt-20">
        <div class="container mx-auto px-6 py-8 text-center text-gray-500">
            <p data-lang="footer_copyright">&copy; 2025 orekh坚果. All Rights Reserved.</p>
            <div class="mt-4 flex justify-center space-x-6">
                <a href="#" class="hover:text-purple-600 transition-colors">Bilibili</a>
                <a href="#" class="hover:text-purple-600 transition-colors">Pixiv</a>
                <a href="#" class="hover:text-purple-600 transition-colors">Weibo</a>
            </div>
        </div>
    </footer>

    <div id="age-gate" class="fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 hidden opacity-0">
        <div class="bg-white p-8 rounded-lg shadow-2xl text-center max-w-sm mx-4 text-gray-800">
            <h3 class="text-2xl font-bold mb-4" data-lang="age_gate_title">内容访问提醒</h3>
            <p class="text-gray-600 mb-6" data-lang="age_gate_desc">您即将访问的内容可能不适合所有年龄段的观众。请确认您已年满18周岁。</p>
            <div class="flex justify-center gap-4">
                <button onclick="closeAgeGate()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-6 rounded-full transition-colors" data-lang="age_gate_leave">离开</button>
                <button onclick="enterSite()" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 px-6 rounded-full transition-colors" data-lang="age_gate_enter">我已年满18周岁</button>
            </div>
        </div>
    </div>

    <div id="artwork-modal" class="fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 hidden opacity-0" onclick="closeArtworkModal()">
        <div id="artwork-modal-content" class="bg-white rounded-lg shadow-2xl max-w-4xl w-11/12 max-h-[90vh] flex flex-col md:flex-row transform scale-95" onclick="event.stopPropagation()">
            <div class="md:w-1/2 h-64 md:h-auto">
                <img id="modal-img" src="" alt="作品详情" class="w-full h-full object-cover md:rounded-l-lg">
            </div>
            <div class="md:w-1/2 p-8 overflow-y-auto">
                <h3 id="modal-title" class="text-3xl font-bold mb-4 title-font"></h3>
                <p id="modal-desc" class="text-gray-600 mb-6"></p>
                <div id="modal-tags" class="flex flex-wrap gap-2"></div>
                <button onclick="closeArtworkModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-800 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- ★★★ 您的专属配置信息 ★★★ ---
        const GOOGLE_SHEET_URL = '/data/works.csv?v=1756300112';
        const PROXY_URL = '';

        // --- 语言翻译数据 ---
        const translations = {
            zh: { hero_title: 'orekh坚果', about_p1: '你好，朋友。我是orekh坚果。', footer_copyright: '&copy; 2025 orekh坚果. All Rights Reserved.', nav_portfolio: '作品集', nav_shop: '商店', nav_about: '关于', nav_commission: '约稿', nav_portfolio_mobile: '作品集', nav_shop_mobile: '商店', nav_about_mobile: '关于', nav_commission_mobile: '约稿', hero_subtitle: '在光影与色彩中，编织幻想与现实的交界。', portfolio_title: '作品集', portfolio_sfw: '公开作品', portfolio_r18: '私人作品 (R-18)', portfolio_r18_prompt: '点击查看<br>(需年满18周岁)', shop_title: '商店', shop_digital_title: '数字资产', shop_digital_desc: '获取我的独家笔刷、高清壁纸包和PSD源文件，深入了解创作的每一个细节。', shop_button: '前往支持', shop_merch_title: '实体周边', shop_merch_desc: '限量版签名画集、艺术微喷复制画和IP衍生品，将这份热爱带入你的现实世界。', shop_button_soon: '敬请期待', shop_community_title: '知识社群', shop_community_desc: '加入我的核心粉丝圈，参与直播改画，获取专属教程，与我一起共同成长。', about_title: '关于我', about_p2: '一位在数字画布上，寻找东方意境与赛博朋克交汇点的画师。这里是我的私人美术馆，也是我与世界对话的窗口。', about_p3: '我相信，每一笔色彩，都应承载情感；每一个角色，都该拥有灵魂。感谢你来到我的世界。', commission_title: '约稿', commission_status: '【状态：约稿通道当前已关闭，感谢关注】', commission_desc: '感谢您对我的作品的喜爱。由于近期个人项目繁忙，为保证每一幅作品的质量，我暂时关闭了新的商业约稿通道。开放时间将在B站及本站同步更新，敬请期待。', age_gate_title: '内容访问提醒', age_gate_desc: '您即将访问的内容可能不适合所有年龄段的观众。请确认您已年满18周岁。', age_gate_leave: '离开', age_gate_enter: '我已年满18周岁', error_loading: '作品加载失败，请检查后台链接或稍后重试。', no_sfw_works: '暂无公开作品', no_r18_works: '暂无私人作品', load_more: '加载更多' },
            en: { hero_title: 'orekh', about_p1: 'Hello, friend. I am orekh.', footer_copyright: '&copy; 2025 orekh. All Rights Reserved.', nav_portfolio: 'Portfolio', nav_shop: 'Shop', nav_about: 'About', nav_commission: 'Commission', nav_portfolio_mobile: 'Portfolio', nav_shop_mobile: 'Shop', nav_about_mobile: 'About', nav_commission_mobile: 'Commission', hero_subtitle: 'Weaving the intersection of fantasy and reality in light, shadow, and color.', portfolio_title: 'Portfolio', portfolio_sfw: 'SFW Works', portfolio_r18: 'R-18 Works', portfolio_r18_prompt: 'Click to View<br>(18+ Only)', shop_title: 'Shop', shop_digital_title: 'Digital Assets', shop_digital_desc: 'Get my exclusive brushes, HD wallpaper packs, and PSD source files to dive deep into every detail of creation.', shop_button: 'Support Now', shop_merch_title: 'Merchandise', shop_merch_desc: 'Limited edition signed art books, Giclée prints, and IP merchandise to bring the passion into your world.', shop_button_soon: 'Coming Soon', shop_community_title: 'Community', shop_community_desc: 'Join my core fan community, participate in live art revisions, and get exclusive tutorials to grow with me.', about_title: 'About Me', about_p2: 'An artist on a digital canvas, seeking the intersection of oriental aesthetics and cyberpunk. This is my private gallery and my window to the world.', about_p3: 'I believe every color should carry emotion; every character should have a soul. Thank you for visiting my world.', commission_title: 'Commission', commission_status: '[STATUS: COMMISSIONS ARE CURRENTLY CLOSED]', commission_desc: 'Thank you for your interest in my work. To ensure the quality of each piece, commercial commissions are temporarily closed due to a busy project schedule. Reopening dates will be announced on Bilibili and this site.', age_gate_title: 'Content Warning', age_gate_desc: 'The content you are about to view may not be suitable for all audiences. Please confirm you are 18 years of age or older.', age_gate_leave: 'Leave', age_gate_enter: 'I am 18 or older', error_loading: 'Failed to load artworks. Please check the backend link or try again later.', no_sfw_works: 'No public works yet.', no_r18_works: 'No private works yet.', load_more: 'Load More' }
        };

        // --- 全局变量 ---
        let artworksData = [], sfwItems = [], r18Items = [], sfwShownCount = 0, r18ShownCount = 0;
        const ITEMS_PER_LOAD = 6;

        // --- 核心自动化脚本 ---
        document.addEventListener('DOMContentLoaded', () => {
            fetchArtworks();
            setupEventListeners();
            setLanguage('zh-CN');
        });
        
        async function fetchArtworks() {
            const sfwContainer = document.getElementById('gallery-sfw');
            const r18Container = document.getElementById('gallery-r18');
            try {
                if (!GOOGLE_SHEET_URL || GOOGLE_SHEET_URL.includes('【')) throw new Error('Google Sheet URL is not configured.');
                const response = await fetch(GOOGLE_SHEET_URL, { method: 'GET', cache: 'no-store', redirect: 'follow' })}`);
                if (!response.ok) throw new Error(`HTTP ${response.status} - ${response.url}`);
                const csvText = await response.text();
        console.log('[CSV] Loaded:', response.url, csvText.slice(0, 80));
                
                artworksData = parseCSV(csvText).reverse(); 
                sfwItems = artworksData.filter(item => item.category === 'SFW');
                r18Items = artworksData.filter(item => item.category === 'R-18');
                renderInitialGalleries();
            } catch (error) {
                console.error('获取作品失败:', error);
                const errorMsg = `<p class="text-center text-red-500 col-span-full" data-lang="error_loading">作品加载失败，请检查后台链接或稍后重试。</p>`;
                sfwContainer.innerHTML = errorMsg;
                r18Container.innerHTML = errorMsg;
                setLanguage(document.documentElement.lang);
            }
        }

        function parseCSV(text) {
            const result = [];
            const lines = text.trim().split(/\r\n|\n/);
            if (lines.length < 2) return [];
            const headers = lines[0].split(',').map(h => h.trim());
            for (let i = 1; i < lines.length; i++) {
                if (!lines[i]) continue;
                const obj = {};
                const values = lines[i].match(/(".*?"|[^",]+)/g) || [];
                for (let j = 0; j < headers.length; j++) {
                    let value = (values[j] || '').trim();
                    if (value.startsWith('"') && value.endsWith('"')) {
                        value = value.slice(1, -1).replace(/""/g, '"');
                    }
                    obj[headers[j]] = value;
                }
                if (Object.values(obj).some(val => val)) { 
                    result.push(obj);
                }
            }
            return result;
        }

        function renderInitialGalleries() {
            const sfwContainer = document.getElementById('gallery-sfw');
            const r18Container = document.getElementById('gallery-r18');
            sfwContainer.innerHTML = ''; 
            r18Container.innerHTML = ''; 
            sfwShownCount = 0;
            r18ShownCount = 0;
            if (sfwItems.length === 0) { sfwContainer.innerHTML = `<p class="text-center text-gray-500 col-span-full" data-lang="no_sfw_works">暂无公开作品</p>`; } else { loadMoreItems('sfw'); }
            if (r18Items.length === 0) { r18Container.innerHTML = `<p class="text-center text-gray-500 col-span-full" data-lang="no_r18_works">暂无私人作品</p>`; } else { loadMoreItems('r18'); }
            setLanguage(document.documentElement.lang);
        }

        function loadMoreItems(category) {
            let container, items, shownCount;
            if (category === 'sfw') { container = document.getElementById('gallery-sfw'); items = sfwItems; shownCount = sfwShownCount; } 
            else { container = document.getElementById('gallery-r18'); items = r18Items; shownCount = r18ShownCount; }
            const fragment = document.createDocumentFragment();
            const itemsToLoad = items.slice(shownCount, shownCount + ITEMS_PER_LOAD);
            itemsToLoad.forEach(item => {
                const originalIndex = artworksData.findIndex(original => original === item);
                const div = document.createElement('div');
                const isR18 = item.category === 'R-18';
                div.className = `bg-white rounded-lg overflow-hidden group shadow-md card-hover cursor-pointer ${isR18 ? 'restricted-item' : ''}`;
                div.onclick = () => isR18 ? showAgeGate(div, originalIndex) : showArtworkModal(originalIndex);
                div.innerHTML = `<img src="${item.imageUrl}" alt="${item.title_zh}" class="w-full h-auto object-cover aspect-[3/4]" loading="lazy">${isR18 ? `<div class="absolute inset-0 flex items-end justify-center p-6 overlay"><p class="text-white text-xl font-bold text-center" data-lang="portfolio_r18_prompt">点击查看<br>(需年满18周岁)</p></div>` : ''}`;
                fragment.appendChild(div);
            });
            container.appendChild(fragment);
            if (category === 'sfw') { sfwShownCount += itemsToLoad.length; updateLoadMoreButton('sfw', sfwShownCount, items.length); } 
            else { r18ShownCount += itemsToLoad.length; updateLoadMoreButton('r18', r18ShownCount, items.length); }
            setLanguage(document.documentElement.lang);
        }

        function updateLoadMoreButton(category, shown, total) {
            const containerId = `load-more-${category}-container`;
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            if (shown < total) {
                const button = document.createElement('button');
                button.className = 'bg-purple-600 hover:bg-purple-500 text-white font-bold py-3 px-8 rounded-full transition-colors';
                button.setAttribute('data-lang', 'load_more');
                button.textContent = '加载更多';
                button.onclick = () => loadMoreItems(category);
                container.appendChild(button);
            }
        }
        
        function setupEventListeners() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });
            const langSwitcher = document.getElementById('lang-switcher');
            const langSwitcherMobile = document.getElementById('lang-switcher-mobile');
            const switchLang = () => { const newLang = document.documentElement.lang === 'zh-CN' ? 'en' : 'zh-CN'; setLanguage(newLang); };
            langSwitcher.addEventListener('click', switchLang);
            langSwitcherMobile.addEventListener('click', () => { switchLang(); mobileMenu.classList.add('hidden'); });
        }

        function setLanguage(lang) {
            document.documentElement.lang = lang;
            const langKey = lang === 'en' ? 'en' : 'zh';
            const elements = document.querySelectorAll('[data-lang]');
            elements.forEach(el => { const key = el.getAttribute('data-lang'); if (translations[langKey] && translations[langKey][key]) { el.innerHTML = translations[langKey][key]; } });
            const switcher = document.getElementById('lang-switcher');
            const switcherMobile = document.getElementById('lang-switcher-mobile');
            if (lang === 'zh-CN') { switcher.textContent = 'EN'; switcherMobile.textContent = 'Switch to English'; } else { switcher.textContent = '中'; switcherMobile.textContent = '切换为中文'; }
        }
        
        const ageGate = document.getElementById('age-gate');
        const artworkModal = document.getElementById('artwork-modal');
        const artworkModalContent = document.getElementById('artwork-modal-content');
        let pendingItemIndex = -1, pendingItemElement = null;

        function showAgeGate(element, index) { if (sessionStorage.getItem('ageVerified') === 'true') { showArtworkModal(index); unlockSingleItem(element); return; } pendingItemIndex = index; pendingItemElement = element; ageGate.classList.remove('hidden'); setTimeout(() => ageGate.classList.add('opacity-100'), 10); }
        function closeAgeGate() { ageGate.classList.remove('opacity-100'); setTimeout(() => ageGate.classList.add('hidden'), 300); }
        function enterSite() { sessionStorage.setItem('ageVerified', 'true'); if (pendingItemIndex !== -1) { showArtworkModal(pendingItemIndex); unlockSingleItem(pendingItemElement); } closeAgeGate(); }
        function unlockSingleItem(element) { if (!element) return; const img = element.querySelector('img'); const overlay = element.querySelector('.overlay'); if (img) img.style.filter = 'blur(0px) saturate(1)'; if (overlay) overlay.style.display = 'none'; element.style.cursor = 'default'; }

        function showArtworkModal(index) {
            const item = artworksData[index];
            if (!item) return;
            document.getElementById('modal-img').src = item.imageUrl;
            const langKey = document.documentElement.lang === 'en' ? 'en' : 'zh';
            document.getElementById('modal-title').textContent = item[`title_${langKey}`];
            document.getElementById('modal-desc').textContent = item[`description_${langKey}`];
            const tagsContainer = document.getElementById('modal-tags');
            tagsContainer.innerHTML = '';
            if(item.tags) {
                item.tags.split(',').forEach(tag => {
                    if(tag.trim()){
                        const tagElement = document.createElement('span');
                        tagElement.className = 'bg-purple-100 text-purple-800 text-sm font-medium mr-2 mb-2 px-2.5 py-0.5 rounded-full';
                        tagElement.textContent = tag.trim();
                        tagsContainer.appendChild(tagElement);
                    }
                });
            }
            artworkModal.classList.remove('hidden');
            setTimeout(() => { artworkModal.classList.add('opacity-100'); artworkModalContent.classList.remove('scale-95'); }, 10);
        }

        function closeArtworkModal() { artworkModal.classList.remove('opacity-100'); artworkModalContent.classList.add('scale-95'); setTimeout(() => { artworkModal.classList.add('hidden'); }, 300); }
    </script>
</body>
</html>